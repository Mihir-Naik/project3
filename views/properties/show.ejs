<div class="row">
  <div class="property-info col-md-6">
    <h1><%= `${property.aptNumber}, ${property.street}, ${property.city}, ${property.state} ${property.zipCode}` %></h1>
    <dl>
      <dt>Owner</dt>
      <dd><%= property.owner.firstName + " " + property.owner.lastName  %></dd>

      <dt>Rental Price</dt>
      <dd><%= property.rentalPrice %></dd>

      <dt>Bedrooms</dt>
      <dd><%= property.numBedrooms %></dd>

      <dt>Bathrooms</dt>
      <dd><%= property.numBathrooms %></dd>

      <dt>Size</dt>
      <dd><%= property.sizeSquareFeet %> sq ft.</dd>

      <dt>Vacant</dt>
      <dd><%= property.vacant %></dd>
      
      <dt>Description</dt>
      <dd><%= property.description %></dd>
    </dl>
  </div>
  <div class="col-md-6"> <!-- Images -->
    <% if(property.images.length > 0 ) { %>
      <div id="propertyImagesCarousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner" role="listbox">
          <% property.images.forEach(function(image, index){ %>
            <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
              <img class="d-block img-fluid" src="<%= image.url %>" alt="<%= image.caption %>" style="width: 100%">
            </div>
          <% }) %>
        </div>
        <a class="carousel-control-prev" href="#propertyImagesCarousel" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#propertyImagesCarousel" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    <% } else { %>
      <h3>There are no images to display</h3>
    <% } %>
  </div>
</div>

<% if(loggedIn && currentUser.id == property.owner.id) {%>
  <% if(property.vacant) { %>
    <a href="/properties/<%= property._id %>/residents/new">Add a Resident</a>
  <% } %>
  <a href="/properties/<%= property._id %>/edit">Edit</a>
  <a id="delete" href='/properties/<%= property._id %>?_method=DELETE'>Delete</a>
<% } %>

<script>
  $('#propertyImagesCarousel').carousel()

  $('#delete').on('click', function(e) {
    if(!confirm("Are you sure you want to delete this property?")){
      return false
    }
  })
</script>